<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Vue3 åˆ‡æ›å…§å®¹</title>
<style>
*{ margin:0; padding:0; box-sizing:border-box; font-family:'Noto Sans TC','å¾®è»Ÿæ­£é»‘é«”'; text-decoration:none;}

body { background:#d191b9;}

.wrapper{ width:100%; max-width:800px; margin:0px auto; padding:20px 0px;}

.wrap { width:60%; margin:0px auto;}
.tab { display:flex; margin:0; padding:0;}
.tab-item { flex:1; margin-right:3px; padding:16px 0px; list-style:none; color:#fff; text-align:center; border-radius:10px 10px 0px 0px; background:#6f5e9c; cursor:pointer;}
.tab-item:last-child{ margin-right:0px;}
.active { color:#333; background: #f0dc6f;}
.content { padding:16px; border-radius:0px 0px 10px 10px; background:#eee; box-shadow:2px 5px 7px rgba(0,0,0,0.2);}
.content .item { display:flex; margin-bottom:15px; padding:20px 0px; border-bottom: 1px solid #aaa; position:relative;}
.content .item span.des{ width:25%; margin-right:20px;}

.content .count{ margin-right:20px;}
.content .count button.minus, .content .count button.plus{ border:0; margin:0px 5px; padding:3px 5px; border-radius:5px; background:#ccc;}

.content .item .price{ margin-right:20px;}

.account .final{ font-weight:800; font-size:26px; color: #d85252;}

</style>
</head>
<body>
	<script type="importmap">
		{
			"imports": {
				"vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
			}
		}
		</script>
	
		<!--wrapper-->
		<div class="wrapper">
			
			<!--app-->
			<div class="wrap" id="app">

				<!--tab é–‹å§‹-->
				<ul class="tab">
					<li class="tab-item" 
					:class="{active: activeIndex === index}" 
					v-for="(item, index) in tabList" 
					@click="toggle(index)">{{ item }}</li>
				</ul>
				<!--tab çµæŸ-->

				<!-- content é–‹å§‹ -->
				<div class="content">
					<!-- item -->
					<div class="item" v-for="(item, index) in pages[activeIndex]" :key="index">
						<span class="des">{{ item.name }}</span>

						<div class="count">
							<button class="minus" @click="decrement(index)">-</button>
							<strong>{{ getCount(index) }}</strong>
							<button class="plus" @click="increment(index)">+</button>
						</div>
						
						<div class="price">${{ item.price }}</div>
						<div class="price-total">ç¸½é‡‘é¡ï¼š${{ getTotalPrice(index) }}</div>
					</div>
					<!-- item -->

					<div class="account">ç¸½é‡‘é¡çµç®—ï¼š
						<span class="final">${{ getFinalTotal() }}</span></div>
					
				</div>
				<!-- content çµæŸ -->
				
			</div>
			<!--app-->

		</div>
		<!--wrapper-->

	
	<script type="module">

		import { createApp } from 'vue';

		createApp({
			data() {
				return {
					activeIndex: 1, // é¦–æ¬¡ä½ç½®
					tabList: ['æ°´æœ', 'é£²æ–™', 'ä¸»é£Ÿ', 'æ¹¯å“'],
					pages: [
						[ 
							{ name: 'ğŸŒé¦™è•‰', price: 30 }, 
							{ name: 'ğŸ‘æ¡ƒå­', price: 50 } 
						],
						[ 
							{ name: 'ğŸ§‹çç å¥¶èŒ¶', price: 60 }, 
							{ name: 'ğŸ¹è¥¿ç“œæ±', price: 45 }, 
							{ name: 'ğŸ¥•è˜¿è””æ±', price: 40 } 
						],
						[ 
							{ name: 'ä¹¾éºµ', price: 55 }, 
							{ name: 'æ»·è‚‰é£¯', price: 65 } 
						],
						[ 
							{ name: 'å‘³å¢æ¹¯', price: 35 } 
						]
					],
					counts: {} //ç”¨ä¾†å­˜å„²æ¯å€‹å•†å“çš„æ•¸é‡
				};
			},
			methods: {
				toggle(index) {
					this.activeIndex = index;
				},
				increment(index) {
					const key = `${this.activeIndex}-${index}`;
					this.counts[key] = (this.counts[key] || 0) + 1;
				},
				decrement(index) {
					const key = `${this.activeIndex}-${index}`;
					if (this.counts[key] > 0) {
						this.counts[key]--;
					}
				},
				getCount(index) {
					return this.counts[`${this.activeIndex}-${index}`] || 0;
				},
				getTotalPrice(index) {
					const count = this.getCount(index);
					const price = this.pages[this.activeIndex][index].price;
					return count * price; //è¨ˆç®—ç¸½åƒ¹
				},
				getFinalTotal() {
					let total = 0;
					//éæ­·æ‰€æœ‰åˆ†é¡
					this.pages.forEach((category, categoryIndex) => {
						category.forEach((item, itemIndex) => {
							const key = `${categoryIndex}-${itemIndex}`;
							total += (this.counts[key] || 0) * item.price;
						});
					});
					return total;
				}
			}
		}).mount('#app');

	</script>
</body>
</html>